import matplotlib.pyplot as plt
import numpy as np
import serial
from drawnow import *

tempArray = []
pressArray = []

count = 0

arduinoSerialData = serial.Serial("/dev/ttyUSB0", 9600)
plt.ion()

def makeFig():
    plt.plot(tempArray, "r-o")

try:
    while True:
        if arduinoSerialData.in_waiting > 0:
            data = str(arduinoSerialData.readline())
            data = data[2:][:-5]
            dataArray = data.split(" , ")
            temp = float(dataArray[0])
            press = float(dataArray[1])
            tempArray.append(temp)
            pressArray.append(press)
            drawnow(makeFig)
            plt.pause(.0000001)
            count += 1
            if count > 50:
                tempArray.pop(0)

except KeyboardInterrupt:
    pass
